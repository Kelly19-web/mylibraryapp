<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Library Hub</title>

  <!-- Poppins font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#020617" />
  <link rel="apple-touch-icon" href="icons/icon-512.png" />
</head>

<body>
  <header class="header">
    <h1>My Library Hub</h1>

    <div class="header-buttons">
      <button id="wishlistBtn" class="wishlist-btn">Wishlist ♡</button>
      <button id="randomPickBtn" class="random-btn">Random Pick</button>
    </div>
  </header>

  <main class="main">
    <section class="bookshelf">
      <div class="bookshelf-header">
        <h2>Bookshelf</h2>
        <p>Your shelves at a glance</p>
      </div>

      <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search books..." class="search-auto" />
      </div>

      <div id="shelvesContainer" class="shelves-list">
        <div class="shelf-card" data-shelf="read">
          <div class="shelf-main" data-shelf-toggle>
            <img src="img/shelf-read.png" class="shelf-icon" />
            <div class="shelf-text">
              <div class="shelf-title">Read</div>
              <div class="shelf-meta"><span id="count-read">0</span> books</div>
            </div>
            <div class="shelf-chevron">▾</div>
          </div>
          <div class="shelf-books" id="shelf-read-books"></div>
        </div>

        <div class="shelf-card" data-shelf="havent">
          <div class="shelf-main" data-shelf-toggle>
            <img src="img/shelf-havent.png" class="shelf-icon" />
            <div class="shelf-text">
              <div class="shelf-title">Haven't read</div>
              <div class="shelf-meta"><span id="count-havent">0</span> books</div>
            </div>
            <div class="shelf-chevron">▾</div>
          </div>
          <div class="shelf-books" id="shelf-havent-books"></div>
        </div>
      </div>
    </section>
  </main>

  <button id="addBookFab" class="fab">+</button>

  <!-- Add Book Modal -->
  <div id="addModal" class="modal-overlay hidden">
    <div class="modal-content">
      <button id="closeAddModal" class="modal-close">&times;</button>
      <h2 class="modal-title">Add New Book</h2>

      <form id="addBookForm" class="form">
        <input type="text" id="addTitle" placeholder="Title" required />
        <input type="text" id="addAuthor" placeholder="Author" required />
        <input type="text" id="addGenre" placeholder="Genre" />
        <textarea id="addSummary" placeholder="Summary" rows="4"></textarea>
        <input type="text" id="addRating" placeholder="Rating (1–5)" pattern=".*" />

        <!-- ISBN (typing only) -->
        <input type="text" id="addIsbn" placeholder="ISBN" />

        <label class="fileLabel">
          Choose Cover
          <input type="file" id="addCover" accept="image/*" />
        </label>

        <p id="coverSelectedMsg" class="cover-selected-msg" style="display:none;">Cover selected!</p>

        <select id="addShelf">
          <option value="" selected>No shelf selected</option>
          <option value="havent">Haven't read</option>
          <option value="read">Read</option>
        </select>

        <button type="button" id="wishlistFormBtn" class="wishlist-form-btn">♡ Add to Wishlist</button>
        <button type="button" id="addBookBtn" class="btn-primary">Add Book</button>
      </form>
    </div>
  </div>

  <!-- BOOK MODAL -->
  <div id="bookModal" class="modal-overlay hidden">
    <div class="modal-content">
      <button id="closeBookModal" class="modal-close">&times;</button>
      <div id="bookModalBody"></div>
    </div>
  </div>

  <!-- WISHLIST PANEL -->
  <div id="wishlistPanel" class="wishlist-panel">
    <div class="wishlist-header">
      <h2>Your Wishlist</h2>
      <button id="closeWishlist" class="wishlist-close">&times;</button>
    </div>
    <div id="wishlistList"></div>
  </div>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script src="script.js"></script>
</body>
</html>